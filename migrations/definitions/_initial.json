{"schemas":"DEFINE TABLE OVERWRITE area SCHEMALESS;\r\n\r\nDEFINE FIELD OVERWRITE identifier ON area;\r\nDEFINE FIELD OVERWRITE name ON area;\r\nDEFINE FIELD OVERWRITE area ON area;\r\n\r\nDEFINE TABLE OVERWRITE items TYPE RELATION IN area OUT item;\r\n\nDEFINE TABLE OVERWRITE game SCHEMALESS;\r\n\r\nDEFINE FIELD OVERWRITE identifier ON game;\r\nDEFINE FIELD OVERWRITE name ON game;\r\nDEFINE FIELD OVERWRITE status ON game;\r\nDEFINE FIELD OVERWRITE day ON game;\r\n\r\nDEFINE TABLE OVERWRITE areas TYPE RELATION IN game OUT area ENFORCED;\r\n\nDEFINE TABLE OVERWRITE item SCHEMALESS;\r\n\r\nDEFINE FIELD OVERWRITE identifier ON item;\r\nDEFINE FIELD OVERWRITE name ON item;\r\nDEFINE FIELD OVERWRITE item_type ON item;\r\nDEFINE FIELD OVERWRITE quantity ON item;\r\nDEFINE FIELD OVERWRITE attribute ON item;\r\nDEFINE FIELD OVERWRITE effect ON item;\r\n\nDEFINE TABLE OVERWRITE message;\r\nDEFINE FIELD OVERWRITE id ON message;\r\nDEFINE FIELD OVERWRITE source ON message TYPE object;\r\nDEFINE FIELD OVERWRITE source.type ON message TYPE string;\r\nDEFINE FIELD OVERWRITE source.value ON message TYPE string;\r\nDEFINE FIELD OVERWRITE game_day ON message TYPE number;\r\nDEFINE FIELD OVERWRITE subject ON message TYPE string;\r\nDEFINE FIELD OVERWRITE timestamp ON message TYPE number;\r\nDEFINE FIELD OVERWRITE content ON message TYPE string;\r\n\r\n-- Define indexes for querying\r\nDEFINE INDEX OVERWRITE message_timestamp ON message FIELDS timestamp;\r\nDEFINE INDEX OVERWRITE message_game_day ON message FIELDS game_day;\r\nDEFINE INDEX OVERWRITE message_source_type ON message FIELDS source.type;\r\nDEFINE INDEX OVERWRITE message_game_id ON message FIELDS source.value;\r\n\r\n-- Helper functions for common queries\r\nDEFINE FUNCTION OVERWRITE fn::get_messages_by_day($day: number) {\r\n    RETURN SELECT * FROM message\r\n    WHERE game_day = $day\r\n    ORDER BY timestamp;\r\n};\r\n\r\nDEFINE FUNCTION OVERWRITE fn::get_messages_by_source_type($source_type: string) {\r\n    RETURN SELECT * FROM message\r\n    WHERE source.type = $source_type\r\n    ORDER BY timestamp;\r\n};\r\n\r\nDEFINE FUNCTION OVERWRITE fn::get_messages_by_game_id($game_id: string) {\r\n    RETURN SELECT * FROM message\r\n    WHERE source.type = 'Game'\r\n    AND source.value = $game_id\r\n    ORDER BY timestamp;\r\n};\r\n\nDEFINE TABLE OVERWRITE script_migration SCHEMAFULL\r\n    PERMISSIONS\r\n        FOR select FULL\r\n        FOR create, update, delete NONE;\r\n\r\nDEFINE FIELD OVERWRITE script_name ON script_migration TYPE string;\r\nDEFINE FIELD OVERWRITE executed_at ON script_migration TYPE datetime VALUE time::now() READONLY;\nDEFINE TABLE OVERWRITE tribute SCHEMALESS;\r\n\r\nDEFINE FIELD OVERWRITE identifier ON tribute;\r\nDEFINE FIELD OVERWRITE status ON tribute;\r\nDEFINE FIELD OVERWRITE avatar ON tribute;\r\nDEFINE FIELD OVERWRITE name ON tribute;\r\nDEFINE FIELD OVERWRITE district ON tribute;\r\nDEFINE FIELD OVERWRITE area ON tribute;\r\nDEFINE FIELD OVERWRITE player_name ON tribute;\r\nDEFINE FIELD OVERWRITE statistics ON tribute;\r\nDEFINE FIELD OVERWRITE attributes ON tribute;\r\nDEFINE FIELD OVERWRITE items ON tribute;\r\n\r\nDEFINE TABLE OVERWRITE owns TYPE RELATION IN tribute OUT item;\r\nDEFINE TABLE OVERWRITE playing_in TYPE RELATION IN tribute OUT game ENFORCED;\r\n","events":""}